<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet" href="/public/css/global.css" />
  <link rel="stylesheet" href="/public/css/itemaddmin.css" />
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
  <!-- 헤더 -->
  <%- include("header") -%>
    <div class="mainwrap">
      <div class="mainbox">
        <form name="mainForm" enctype="multipart/form-data">
          <div class="imgflex">
            <div class="selectimgbox">
              <!-- 이미지 -->
              <label for="image" id="select-img">
                <div class="btn-upload">상품이미지 선택</div>
              </label>
              <input id="image" oninput="binImg('')" type="file" name="image" />
              <div class="filenamee">선택된 파일 없음</div>
            </div>
          </div>
          <div class="inputbox">
            <label for="type-title">타입</label>
            <select name="type" id="types">
              <% data.forEach((x)=>{%>
                <option value="<%= x.id %>">
                  <%= x.name %>
                </option>
                <% }) %>
            </select>

            <input oninput="checkBin('name')" id="name" name="name" placeholder="상품명을 입력해주세요." />
            <input oninput="checkBin('price')" id="price" name="price" placeholder="가격을 입력해주세요." />
            <input oninput="checkBin('detail')" id="detail" name="detail" placeholder="상세내용을 입력해주세요" />
            <button class="btn" onclick="createData(event)" disabled>등록</button>
          </div>
        </form>
        <br>
        <div class="tablestyle">
          <table class="tablebox">
            <thead>
              <tr>
                <th>카테고리 id</th>
                <th>이미지</th>
                <th>상품명</th>
                <th>가격</th>
                <th>상세내용</th>
                <th>수정</th>
                <th>삭제</th>
              </tr>
            </thead>
            <tbody>
              <% for(let i=0;i < itemdata.length;i++){ %>
                <tr id="tr_<%= itemdata[i].id %>">
                  <td>
                    <%= itemdata[i].cateid %>
                  </td>
                  <td>
                    <img src="<%= itemdata[i].url %>" width="50" height="50" />
                  </td>
                  <td>
                    <%= itemdata[i].name %>
                  </td>
                  <td>
                    <%= itemdata[i].price %>
                  </td>
                  <td>
                    <%= itemdata[i].detail %>
                  </td>
                  <td><button class="btn" type="button" onclick="updatePage(`<%= itemdata[i].id %>`)">수정</button></td>
                  <td><button class="btn" type="button" onclick="deletewebtoons(`<%= itemdata[i].id %>`)">삭제</button>
                  </td>
                </tr>
                <%}%>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="flexbox"></div>
    <!-- 푸터 -->
    <%- include("footer") -%>
</body>

<script src="/public/js/itemaddmin.js"></script>

</html>